<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전기계산기 Pro - 케이블 선정</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        h2 { color: var(--primary); text-align: center; margin-bottom: 1.5rem; }
        .input-group { margin-bottom: 1rem; }
        label { display: block; font-size: 14px; margin-bottom: 5px; color: #475569; }
        input, select { width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        button:hover { background: #1d4ed8; }
        .result { margin-top: 1.5rem; padding: 1rem; background: #eff6ff; border-radius: 8px; display: none; }
        .result p { margin: 5px 0; font-size: 15px; }
        .highlight { color: #2563eb; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>⚡ 케이블 규격 계산기</h2>
    
    <div class="input-group">
        <label>부하 용량 (kW)</label>
        <input type="number" id="power" value="20" step="0.1">
    </div>
    
    <div class="input-group">
        <label>전압 (V)</label>
        <select id="voltage">
            <option value="380">3상 380V</option>
            <option value="220">단상 220V</option>
        </select>
    </div>
    
    <div class="input-group">
        <label>역률 (cosφ)</label>
        <input type="number" id="pf" value="0.85" step="0.01">
    </div>

    <div class="input-group">
        <label>주변 온도 보정 (40℃ 기준)</label>
        <select id="tempFactor">
            <option value="0.91">CV 케이블 (0.91)</option>
            <option value="1.0">상온 (1.0)</option>
        </select>
    </div>

    <button onclick="calculate()">규격 계산하기</button>

    <div id="result" class="result">
        <p>설계전류(Ib): <span id="resIb" class="highlight"></span> A</p>
        <p>추천 차단기(In): <span id="resIn" class="highlight"></span> A</p>
        <hr>
        <p>최종 케이블 규격: <span id="resSq" style="font-size: 1.2rem; color: #dc2626; font-weight: 800;"></span></p>
        <p style="font-size: 12px; color: #64748b; margin-top: 10px;">* KEC 기준 / 공사방법 B1(매입) 기준 예시입니다.</p>
    </div>
</div>

<script>
function calculate() {
    const P = document.getElementById('power').value;
    const V = document.getElementById('voltage').value;
    const pf = document.getElementById('pf').value;
    const k = document.getElementById('tempFactor').value;

    // 1. 설계전류 계산
    let ib = (V == 380) ? (P * 1000) / (Math.sqrt(3) * V * pf) : (P * 1000) / (V * pf);
    
    // 2. 차단기 정격 선정 (표준 정격 리스트)
    const mccb = [15, 20, 30, 40, 50, 60, 75, 100, 125, 150, 175, 200, 225, 250];
    let in_rating = mccb.find(r => r >= ib) || "별도 산정";

    // 3. 케이블 허용전류 데이터 (XLPE 3심 B1 공사기준)
    const cableTable = [
        {sq: "2.5", amp: 26}, {sq: "4", amp: 35}, {sq: "6", amp: 45}, 
        {sq: "10", amp: 61}, {sq: "16", amp: 82}, {sq: "25", amp: 108}, 
        {sq: "35", amp: 135}, {sq: "50", amp: 168}, {sq: "70", amp: 207}
    ];

    // 4. 선정 로직 (In <= Iz)
    let selectedSq = "규격 초과";
    for (let i = 0; i < cableTable.length; i++) {
        let iz = cableTable[i].amp * k; // 보정계수 적용
        if (iz >= in_rating) {
            selectedSq = cableTable[i].sq + " mm²";
            break;
        }
    }

    // 결과 출력
    document.getElementById('resIb').innerText = ib.toFixed(2);
    document.getElementById('resIn').innerText = in_rating;
    document.getElementById('resSq').innerText = selectedSq;
    document.getElementById('result').style.display = 'block';
}
</script>

</body>
</html>
