<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ê¸°ê³„ì‚°ê¸° Pro - ë¹„ì£¼ì–¼ ë²„ì „</title>
    <style>
        :root { --primary: #2563eb; --secondary: #475569; --bg: #f8fafc; }
        body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; background: var(--bg); color: #1e293b; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
        .container { background: white; width: 100%; max-width: 500px; border-radius: 20px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.05); overflow: hidden; }
        
        /* Header Header */
        .header { background: var(--primary); color: white; padding: 1.5rem; text-align: center; }
        .header h2 { margin: 0; font-size: 1.4rem; font-weight: 700; }
        .header p { margin: 5px 0 0; opacity: 0.9; font-size: 0.9rem; }

        /* Content Body */
        .content { padding: 1.5rem; }

        /* Form Elements */
        .input-section { margin-bottom: 1.5rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 1.5rem; }
        .input-group { margin-bottom: 1rem; }
        label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 8px; color: var(--secondary); }
        select, input { width: 100%; padding: 12px 16px; border: 1px solid #cbd5e1; border-radius: 10px; font-size: 15px; appearance: none; background-color: #fff; transition: border-color 0.2s; }
        select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 1rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
        select:focus, input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }

        /* Image Display Area */
        .method-visual { margin-top: 10px; border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0; background: #f1f5f9; text-align: center; }
        .method-img { width: 100%; height: 180px; object-fit: cover; display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */ }
        .method-img.active { display: block; /* ì„ íƒëœ ê²ƒë§Œ ë³´ì„ */ }
        .img-caption { font-size: 12px; color: #64748b; padding: 8px; background: #f8fafc; border-top: 1px solid #e2e8f0; }

        /* Button */
        .btn-calc { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: background 0.2s; box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2); }
        .btn-calc:hover { background: #1d4ed8; }
        .btn-calc:active { transform: scale(0.98); }

        /* Result Area */
        .result-box { margin-top: 1.5rem; background: #eff6ff; border-radius: 12px; padding: 1.5rem; border: 1px solid #bfdbfe; display: none; }
        .result-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #dbeafe; }
        .result-row:last-child { border-bottom: none; }
        .res-label { color: #64748b; font-size: 14px; }
        .res-value { font-weight: 700; color: #1e293b; }
        .final-result { text-align: center; margin-top: 15px; padding-top: 15px; border-top: 2px solid #bfdbfe; }
        .final-result h3 { margin: 0 0 10px 0; color: var(--primary); font-size: 16px; }
        .final-sq { font-size: 2rem; font-weight: 800; color: #dc2626; line-height: 1; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>âš¡ ì „ê¸°ê³„ì‚°ê¸° Pro</h2>
        <p>KEC ê·œê²© ê¸°ë°˜ ì¼€ì´ë¸” ìë™ ì„ ì •</p>
    </div>
    
    <div class="content">
        <div class="input-section">
            <div class="input-group">
                <label for="method">ğŸ“Œ ê³µì‚¬ ë°©ë²• ì„ íƒ (KEC)</label>
                <select id="method" onchange="showMethodImage()">
                    <option value="B1" selected>B1 (ë§¤ì… ë°°ê´€, ë²½ë©´ ë¶€ì°©)</option>
                    <option value="A1">A1 (ì²œì¥ ë‚´ ì€í, ë‹¨ì—´ë²½)</option>
                    <option value="C">C (ë…¸ì¶œ, íŠ¸ë ˆì´ í¬ì„¤)</option>
                    <option value="E">E (ê³µì¤‘ í¬ì„¤, ë˜ë” íŠ¸ë ˆì´)</option>
                </select>
                
                <div class="method-visual">
                    <img id="img-B1" src="https://placehold.co/600x300/e2e8f0/475569?text=B1+ê³µì‚¬ë°©ë²•+(ë§¤ì…ë°°ê´€+ë‹¤ì´ì–´ê·¸ë¨)" alt="B1 ì˜ˆì‹œ" class="method-img active">
                    <img id="img-A1" src="https://placehold.co/600x300/e2e8f0/475569?text=A1+ê³µì‚¬ë°©ë²•+(ë‹¨ì—´ë²½+ì€í)" alt="A1 ì˜ˆì‹œ" class="method-img">
                    <img id="img-C" src="https://placehold.co/600x300/e2e8f0/475569?text=C+ê³µì‚¬ë°©ë²•+(ë…¸ì¶œ+íŠ¸ë ˆì´)" alt="C ì˜ˆì‹œ" class="method-img">
                    <img id="img-E" src="https://placehold.co/600x300/e2e8f0/475569?text=E+ê³µì¤‘í¬ì„¤+(ì‚¬ë‹¤ë¦¬í˜•)" alt="E ì˜ˆì‹œ" class="method-img">
                    <div class="img-caption">â€» ìœ„ ì´ë¯¸ì§€ëŠ” ì„¤ì¹˜ ì˜ˆì‹œ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div class="input-group" style="display: flex; gap: 10px;">
                <div style="flex: 1;">
                    <label for="power">ë¶€í•˜ ìš©ëŸ‰ (kW)</label>
                    <input type="number" id="power" value="30" step="0.1">
                </div>
                <div style="flex: 1;">
                    <label for="pf">ì—­ë¥  (cosÏ†)</label>
                    <input type="number" id="pf" value="0.85" step="0.05" max="1" min="0.5">
                </div>
            </div>
            
            <div class="input-group">
                <label for="voltage">ì „ì•• ë° ë°©ì‹ (V)</label>
                <select id="voltage">
                    <option value="380">3ìƒ 3ì„ ì‹ / 4ì„ ì‹ (380V)</option>
                    <option value="220">ë‹¨ìƒ 2ì„ ì‹ (220V)</option>
                </select>
            </div>
        </div>

        <button class="btn-calc" onclick="calculate()">ìµœì  ê·œê²© ì‚°ì¶œí•˜ê¸°</button>

        <div id="result" class="result-box">
            <div class="result-row">
                <span class="res-label">ì„¤ê³„ì „ë¥˜ (Ib)</span>
                <span class="res-value" id="resIb"></span>
            </div>
            <div class="result-row">
                <span class="res-label">ì°¨ë‹¨ê¸° ì •ê²© (In)</span>
                <span class="res-value" id="resIn" style="color: var(--primary);"></span>
            </div>
            <div class="result-row">
                <span class="res-label">ì ìš©ëœ í—ˆìš©ì „ë¥˜ (Iz)</span>
                <span class="res-value" id="resIz"></span>
            </div>
            <div class="final-result">
                <h3>ì¶”ì²œ ì¼€ì´ë¸” ê·œê²© (CV)</h3>
                <div class="final-sq" id="resSq"></div>
                <p style="font-size: 12px; color: #64748b; margin-top: 8px;">* ì„ íƒí•œ ê³µì‚¬ë°©ë²• ë° ì˜¨ë„ì¡°ê±´ ê¸°ì¤€</p>
            </div>
        </div>
    </div>
</div>

<script>
// --- 1. ì´ë¯¸ì§€ ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸ ---
function showMethodImage() {
    const selectedVal = document.getElementById('method').value;
    const images = document.querySelectorAll('.method-img');

    // ëª¨ë“  ì´ë¯¸ì§€ ìˆ¨ê¹€
    images.forEach(img => img.classList.remove('active'));

    // ì„ íƒëœ IDì— í•´ë‹¹í•˜ëŠ” ì´ë¯¸ì§€ë§Œ í‘œì‹œ
    const activeImg = document.getElementById('img-' + selectedVal);
    if (activeImg) {
        activeImg.classList.add('active');
    }
}

// ì´ˆê¸° ë¡œë”© ì‹œ ì‹¤í–‰
window.onload = function() {
    showMethodImage();
}


// --- 2. ê³„ì‚° ë¡œì§ ìŠ¤í¬ë¦½íŠ¸ ---
// KEC CV(XLPE) 3ì‹¬ ê¸°ì¤€ í—ˆìš©ì „ë¥˜ ë°ì´í„° (ì˜ˆì‹œ)
const cableData = {
    "A1": { 2.5: 21, 4: 28, 6: 36, 10: 49, 16: 66, 25: 86, 35: 103 },
    "B1": { 2.5: 26, 4: 35, 6: 45, 10: 61, 16: 82, 25: 108, 35: 135 },
    "C":  { 2.5: 31, 4: 41, 6: 53, 10: 74, 16: 99, 25: 131, 35: 162 },
    "E":  { 2.5: 33, 4: 43, 6: 56, 10: 77, 16: 104, 25: 138, 35: 171 }
};
const mccbRatings = [15, 20, 30, 40, 50, 60, 75, 100, 125, 150, 175, 200, 225, 250];

function calculate() {
    const method = document.getElementById('method').value;
    const P = parseFloat(document.getElementById('power').value);
    const V = parseInt(document.getElementById('voltage').value);
    const pf = parseFloat(document.getElementById('pf').value);
    
    // ì˜¨ë„ ë³´ì •ê³„ìˆ˜ (ì˜ˆ: 40ë„ ê¸°ì¤€ ì„ì˜ ì„¤ì •, í•„ìš” ì‹œ ì…ë ¥ì°½ ì¶”ê°€ ê°€ëŠ¥)
    const k = 0.91; 

    if (!P || !pf) { alert("ë¶€í•˜ ìš©ëŸ‰ê³¼ ì—­ë¥ ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

    // 1. ì„¤ê³„ì „ë¥˜(Ib) ê³„ì‚°
    let ib = (V === 380) ? (P * 1000) / (Math.sqrt(3) * V * pf) : (P * 1000) / (V * pf);
    
    // 2. ì°¨ë‹¨ê¸°(In) ì„ ì •
    let in_rating = mccbRatings.find(r => r >= ib);
    if (!in_rating) { alert("ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ëŒ€ìš©ëŸ‰ ë¶€í•˜ì…ë‹ˆë‹¤."); return; }

    // 3. ì¼€ì´ë¸” ì„ ì • (In <= Iz ì¡°ê±´)
    const currentTable = cableData[method];
    let selectedSq = "ê³„ì‚° ë¶ˆê°€";
    let finalIz = 0;
    let found = false;

    for (const [sq, amp] of Object.entries(currentTable)) {
        let iz = amp * k;
        if (iz >= in_rating) {
            selectedSq = sq + " SQ";
            finalIz = iz;
            found = true;
            break;
        }
    }
    if (!found) selectedSq = "ê·œê²© ì´ˆê³¼ (ì¬ê²€í† )";


    // ê²°ê³¼ ì¶œë ¥ ë° ì• ë‹ˆë©”ì´ì…˜
    const resultBox = document.getElementById('result');
    resultBox.style.display = 'block';
    resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    document.getElementById('resIb').innerText = ib.toFixed(1) + " A";
    document.getElementById('resIn').innerText = in_rating + " A";
    document.getElementById('resIz').innerText = finalIz.toFixed(1) + " A";
    document.getElementById('resSq').innerText = selectedSq;
}
</script>

</body>
</html>
